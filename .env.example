# ============================================
# ALLDEV BACKEND - VARIÁVEIS DE AMBIENTE
# ============================================
# Copie este ficheiro para .env e configure os valores

# ============================================
# SERVIDOR
# ============================================
NODE_ENV=development
PORT=3001
API_PREFIX=/api

# ============================================
# BASE DE DADOS
# ============================================
# PostgreSQL connection string
# Formato: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# Desenvolvimento (Docker): postgresql://postgres:postgres@localhost:5432/alldev
# Desenvolvimento (local): postgresql://postgres:postgres@db:5432/alldev
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/alldev

# ============================================
# JWT (JSON Web Tokens)
# ============================================
# IMPORTANTE: Gere secrets seguros com 32+ caracteres
# Pode usar: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-chars-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# REDIS (Opcional - Cache)
# ============================================
# Deixe vazio se não usar Redis
# Desenvolvimento (Docker): redis://redis:6379
REDIS_URL=redis://localhost:6379

# ============================================
# EMAIL / SMTP
# ============================================
# Configure para enviar emails de verificação e recuperação de password
# Se deixar vazio, os tokens serão apenas logados no console

# Gmail example:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=seu-email@gmail.com
# SMTP_PASS=sua-app-password
# EMAIL_FROM="Alldev <noreply@alldev.com>"

# SendGrid example:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=SG.your-sendgrid-api-key

SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=Alldev <noreply@alldev.com>

# ============================================
# AWS S3 (Upload de Ficheiros)
# ============================================
# Para upload de avatares e imagens
# Obtenha credenciais em: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=eu-west-1
AWS_BUCKET_NAME=alldev-uploads
AWS_BASE_URL=https://your-bucket.s3.eu-west-1.amazonaws.com

# Tipos de ficheiro permitidos (MIME types separados por vírgula)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp

# Tamanho máximo de ficheiro em bytes (5MB = 5242880)
MAX_FILE_SIZE=5242880

# ============================================
# FRONTEND
# ============================================
# URL do frontend para CORS e links em emails
FRONTEND_URL=http://localhost:5173

# ============================================
# RATE LIMITING
# ============================================
# Janela de tempo em milissegundos (15 min = 900000)
RATE_LIMIT_WINDOW_MS=900000

# Número máximo de requisições por janela
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. NUNCA commite o ficheiro .env no git!
# 2. Em produção, use secrets geridos (AWS Secrets Manager, etc.)
# 3. Altere SEMPRE os valores default de JWT_SECRET em produção
# 4. Configure SMTP para funcionalidades de email funcionarem
# 5. Configure S3 para upload de ficheiros funcionar
